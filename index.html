<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <title> Final </title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      overflow: hidden;
      width: 100%;
      height: 100%;
    }
    canvas {
      display: block;
      width: 100vw;
      height: 100vh;
    }
  </style>
</head>
<body>
    <!-- core three.js -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dat.gui/build/dat.gui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/RGBELoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/MTLLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/FontLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/geometries/TextGeometry.js"></script>

    <div id="camera-debug-info"></div>

    <script>
const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;
document.body.appendChild(renderer.domElement);

const scene = new THREE.Scene();

// Camera
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);

// 1. üéØ ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á: ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏û‡∏≠‡∏î‡∏µ
camera.position.set(45, 9, 0);

// 2. üñ±Ô∏è ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
const controls = new THREE.OrbitControls(camera, renderer.domElement);

// 3. üëÄ ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏°‡∏≠‡∏á‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£
controls.target.set(0, 9, 0); // << ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏°‡∏≠‡∏á‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏à‡∏∏‡∏î‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£
controls.update(); // << ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

controls.update(); // << ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á


// üü¢ ‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏£‡∏á‡∏Å‡∏•‡∏°
const glassMaterial = new THREE.MeshPhysicalMaterial({
  color: 0x88aaff,
  metalness: 0,
  roughness: 0.1,
  transmission: 0.8,
  transparent: true,
  opacity: 1.0,
  ior: 1.4,
  thickness: 0.4,
  clearcoat: 1.0,
  clearcoatRoughness: 0.05
});



// ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î camera.lookAt(0, 1, 0); ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ controls.target ‡∏à‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ó‡∏ô




// üì∏ ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ 121881.jpg ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏î‡πâ‡∏≠‡∏¥‡∏™‡∏£‡∏∞
const texLoader2 = new THREE.TextureLoader();
texLoader2.load(
  'https://raw.githubusercontent.com/Folk1648/Folk1648.github.io/main/121881.jpg',
  (tex) => {
    const imgPlane = new THREE.Mesh(
      new THREE.PlaneGeometry(8, 10),
      new THREE.MeshStandardMaterial({ map: tex, side: THREE.DoubleSide })
    );

    // üß± ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ (‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÅ‡∏Å‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏¢‡∏Å‡∏Å‡∏±‡∏ô)
    imgPlane.position.x = -15.5;    // ‡∏ã‡πâ‡∏≤‡∏¢(-) / ‡∏Ç‡∏ß‡∏≤(+)
    imgPlane.position.y = 25;    // ‡∏™‡∏π‡∏á(+)
    imgPlane.position.z = -28.7;  // ‡∏´‡∏ô‡πâ‡∏≤(-) / ‡∏´‡∏•‡∏±‡∏á(+)

    // üîÑ ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ
    imgPlane.rotation.x = 0;      // ‡πÄ‡∏á‡∏¢/‡∏Å‡πâ‡∏°
    imgPlane.rotation.y = 2.4;    // ‡∏´‡∏°‡∏∏‡∏ô‡∏ã‡πâ‡∏≤‡∏¢/‡∏Ç‡∏ß‡∏≤ (‡πÄ‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏ô)
    imgPlane.rotation.z = 0;      // ‡πÄ‡∏≠‡∏µ‡∏¢‡∏á/‡∏ö‡∏¥‡∏î

    // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤ scene
    scene.add(imgPlane);
    
  },
  undefined,
  (err) => console.error('‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', err)
);



const loader = new THREE.GLTFLoader();
loader.load('https://raw.githubusercontent.com/Folk1648/Folk1648.github.io/main/Ground.glb',
  function (gltf) {
    const model = gltf.scene;
    model.traverse(function (child) {
      if (child.isMesh) {
        child.castShadow = true;
        child.receiveShadow = true;
      }
    });
    scene.add(model);
  },
  undefined,
  function (error) {
    console.error('Error loading GLB:', error);
  }
);



loader.load(
  'https://raw.githubusercontent.com/Folk1648/Folk1648.github.io/main/Font_name.glb',
  function (gltf) {
    const model = gltf.scene;

    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏á‡∏≤
    model.traverse(function (child) {
      if (child.isMesh) {
        child.castShadow = true;
        child.receiveShadow = true;
        child.material = new THREE.MeshStandardMaterial({ color: child.material.color });
      }
    });

    // üéØ ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÇ‡∏•‡πÇ‡∏Å‡πâ (‡∏õ‡∏£‡∏±‡∏ö‡∏á‡πà‡∏≤‡∏¢)
    model.position.x = -17.7;   // ‡∏ã‡πâ‡∏≤‡∏¢(-) / ‡∏Ç‡∏ß‡∏≤(+)
    model.position.y = 14.8;    // ‡∏™‡∏π‡∏á(+)
    model.position.z = -32.5;    // ‡∏´‡∏ô‡πâ‡∏≤(-) / ‡∏´‡∏•‡∏±‡∏á(+)

    // üéØ ‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡πÇ‡∏•‡πÇ‡∏Å‡πâ
    model.scale.set(1, 1, 1);

    // üéØ ‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡πÇ‡∏•‡πÇ‡∏Å‡πâ
    model.rotation.x = 0;             // ‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏á‡∏¢/‡∏Å‡πâ‡∏°
    model.rotation.y = 2.4;   // ‡∏´‡∏°‡∏∏‡∏ô‡∏ã‡πâ‡∏≤‡∏¢/‡∏Ç‡∏ß‡∏≤
    model.rotation.z = 0;             // ‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏≠‡∏µ‡∏¢‡∏á

    // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤ scene
    scene.add(model);
    
  },
  undefined,
  function (error) {
    console.error('Error loading GLB:', error);
    
  }
  
);

// ‚ú®‚ú®‚ú® --- ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÑ‡∏ü Spotlight + Helper + GUI (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß) --- ‚ú®‚ú®‚ú®

// 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á SpotLight ‡∏î‡∏ß‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (
const mainSpotLight = new THREE.SpotLight(
    0xffffff,    // ‡∏™‡∏µ‡πÑ‡∏ü (‡∏Ç‡∏≤‡∏ß)
    1.4,         // ‚ú® ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡πà‡∏≤‡∏á
    80,          // ‡∏£‡∏∞‡∏¢‡∏∞‡∏Ç‡∏≠‡∏á‡πÅ‡∏™‡∏á
    0.71,        // ‚ú® ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏•‡∏≥‡πÅ‡∏™‡∏á
    0.55         // ‚ú® ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ö‡∏•‡∏≠‡∏Ç‡∏≠‡∏ö
);

// 2. ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á "‡∏ï‡∏±‡∏ß‡πÑ‡∏ü" ‡πÅ‡∏•‡∏∞ "‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢"
mainSpotLight.position.set(4, 10, -46); // ‚ú® ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏ü
mainSpotLight.target.position.set(-24, 20, -30); // ‚ú® ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢

// 3. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏Ç‡πâ‡∏≤‡∏â‡∏≤‡∏Å (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å!)
scene.add(mainSpotLight);
scene.add(mainSpotLight.target);

// ‚ú®‚ú®‚ú® --- ‡∏à‡∏ö‡∏™‡πà‡∏ß‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏ü --- ‚ú®‚ú®‚ú®

loader.load(
  'https://raw.githubusercontent.com/Folk1648/Folk1648.github.io/main/KU%20Logo.glb',
  function (gltf) {
    const model = gltf.scene;

    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏á‡∏≤
    model.traverse(function (child) {
      if (child.isMesh) {
        child.castShadow = true;
        child.receiveShadow = true;
        child.material = new THREE.MeshStandardMaterial({ color: child.material.color });
      }
    });

    // üéØ ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÇ‡∏•‡πÇ‡∏Å‡πâ (‡∏õ‡∏£‡∏±‡∏ö‡∏á‡πà‡∏≤‡∏¢)
    model.position.x = 5.8;   // ‡∏ã‡πâ‡∏≤‡∏¢(-) / ‡∏Ç‡∏ß‡∏≤(+)
    model.position.y = 5.2;    // ‡∏™‡∏π‡∏á(+)
    model.position.z = -10.7;    // ‡∏´‡∏ô‡πâ‡∏≤(-) / ‡∏´‡∏•‡∏±‡∏á(+)

    // üéØ ‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡πÇ‡∏•‡πÇ‡∏Å‡πâ
    model.scale.set(15, 15, 15);

    // üéØ ‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡πÇ‡∏•‡πÇ‡∏Å‡πâ
    model.rotation.x = 0;             // ‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏á‡∏¢/‡∏Å‡πâ‡∏°
    model.rotation.y = 2.4;   // ‡∏´‡∏°‡∏∏‡∏ô‡∏ã‡πâ‡∏≤‡∏¢/‡∏Ç‡∏ß‡∏≤
    model.rotation.z = 0;             // ‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏≠‡∏µ‡∏¢‡∏á

    // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤ scene
    scene.add(model);
    
  },
  undefined,
  function (error) {
    console.error('Error loading GLB:', error);
    
  }
  
);

let scarecrowModel;
let mixer; // ‡∏ï‡∏±‡∏ß‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ animation
let walkDirection = 1;
let walkSpeed = 0.02;

const newloader = new THREE.GLTFLoader();

loader.load(
  'https://raw.githubusercontent.com/Folk1648/Folk1648.github.io/main/creepy_scarecrow__horror_stylized.glb',
  function (gltf) {
    scarecrowModel = gltf.scene;
    scarecrowModel.traverse(function (child) {
      if (child.isMesh) {
        child.castShadow = true;
        child.receiveShadow = true;
      }
    });

    // ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏Ç‡∏ô‡∏≤‡∏î
    scarecrowModel.position.set(25, 2, 0);
    scarecrowModel.scale.set(3, 3, 3);
    scarecrowModel.rotation.y = 1.5;

    // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ animation ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå
    if (gltf.animations && gltf.animations.length > 0) {
      mixer = new THREE.AnimationMixer(scarecrowModel);
      const action = mixer.clipAction(gltf.animations[0]); // ‡πÉ‡∏ä‡πâ‡∏≠‡∏±‡∏ô‡πÅ‡∏£‡∏Å (‡πÄ‡∏ä‡πà‡∏ô‡∏ó‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏ô)
      action.play();
    }

    scene.add(scarecrowModel);
  },
  undefined,
  function (error) {
    console.error('Error loading GLB:', error);
  }
);


// Lights
const directionalLight = new THREE.DirectionalLight(0xffeedd, 0.9);
directionalLight.position.set(10, 5, 10);
directionalLight.castShadow = true;
scene.add(directionalLight);

// HDRI
const pmremGenerator = new THREE.PMREMGenerator(renderer);
pmremGenerator.compileEquirectangularShader();

new THREE.RGBELoader()
  .setDataType(THREE.UnsignedByteType)
  .load(
    'https://raw.githubusercontent.com/Folk1648/Folk1648.github.io/main/autumn_forest_04_1k%20%281%29.hdr',
    (hdrTexture) => {
      const envMap = pmremGenerator.fromEquirectangular(hdrTexture).texture;
      scene.background = envMap;
      scene.environment = envMap;
      hdrTexture.dispose();
      pmremGenerator.dispose();
    }
  );

// ========== CLICKABLE BUTTONS (ABOUT / BACK) ==========

const clickable = [];

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô + (‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ 3D ‡∏Å‡∏•‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡πâ‡∏≤‡∏°‡∏µ text)
function addObj(mesh, pos, name, text = null, fontUrl =
  'https://threejs.org/examples/fonts/helvetiker_regular.typeface.json') {

  mesh.position.copy(pos);
  mesh.name = name;
  scene.add(mesh);
  clickable.push(mesh);

  if (text) {
    const loader = new THREE.FontLoader();
    loader.load(fontUrl, function (font) {
      const textGeometry = new THREE.TextGeometry(text, {
        font, size: 0.45, height: 0.08, curveSegments: 12
      });
      textGeometry.center();
      const textMaterial = new THREE.MeshStandardMaterial({
        color: 0xffd54f, metalness: 0.2, roughness: 0.35,
        emissive: 0x442200, emissiveIntensity: 0.25
      });
      const textMesh = new THREE.Mesh(textGeometry, textMaterial);
      textMesh.position.copy(pos);
      textMesh.rotation.y = Math.PI / 2; // ‡∏´‡∏±‡∏ô‡∏´‡∏≤‡πÅ‡∏ô‡∏ß‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏à‡∏≤‡∏Å +X
      textMesh.name = name;              // ‚úÖ ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡πÉ‡∏´‡πâ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°
      scene.add(textMesh);
      clickable.push(textMesh);
    });
  }
  return mesh;
}

// --- ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ ‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏î‡πâ) ---
// addObj(new THREE.Mesh(new THREE.SphereGeometry(0.45,32,16),glassMaterial), new THREE.Vector3(5,4,5), 'Box', 'SH');

// --- ‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏£‡∏á‡∏ô‡∏≤ 2 ‡∏≠‡∏±‡∏ô: ABOUT ME / Back ---
addObj(
  new THREE.Mesh(new THREE.SphereGeometry(0.6, 32, 16), glassMaterial),
  new THREE.Vector3(22.0, 3.2, -3.5), // ‡∏ã‡πâ‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢
  'ABOUT',
  'ABOUT ME'
);
addObj(
  new THREE.Mesh(new THREE.SphereGeometry(0.6, 32, 16), glassMaterial),
  new THREE.Vector3(-10, 20, -30), // ‡∏Ç‡∏ß‡∏≤‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢
  'BACK',
  'Back'
);

// üß≠ ‡∏≠‡∏á‡∏®‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏ô)
const backRot = { x: 0, y: 2.4, z: 0 }; // ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ ; ‡∏õ‡∏¥‡∏î‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ

function setBackRotation() {
  // ‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏ó‡∏∏‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠ 'BACK' (‡∏ó‡∏±‡πâ‡∏á‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠)
  clickable
    .filter(o => o.name === 'BACK')
    .forEach(o => o.rotation.set(backRot.x, backRot.y, backRot.z));
}

setBackRotation(); // ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å (‡∏à‡∏∞‡πÇ‡∏î‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏•‡∏π‡∏Å‡∏Å‡∏•‡∏°)
setTimeout(setBackRotation, 400); // ‡πÇ‡∏î‡∏ô‡∏ã‡πâ‡∏≥‡∏ï‡∏≠‡∏ô‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à


// --- ‡∏û‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏ ---
const VIEWS = {
  // (‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏∑‡πà‡∏ô ‡πÉ‡∏´‡πâ‡∏Ñ‡∏á‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ‚Äî‡∏≠‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏™‡πà‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)
  ABOUT: { // ‡πÑ‡∏õ‡∏°‡∏∏‡∏° KU
    pos: new THREE.Vector3(-9.0, 22.7, -42.9),
    tar: new THREE.Vector3( -35,  15,  0) // ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á KU Logo ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
  },
  BACK: {  // ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏£‡∏á‡∏ô‡∏≤
    pos: new THREE.Vector3(45, 9, 0),
    tar: new THREE.Vector3( 0, 9, 0)
  }
};

// --- Raycaster + ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏•‡∏±‡∏ö‡∏°‡∏∏‡∏° ---
const raycaster = new THREE.Raycaster();
const pointer = new THREE.Vector2();

function setPointer(e) {
  const r = renderer.domElement.getBoundingClientRect();
  const x = (e.clientX ?? e.touches?.[0]?.clientX ?? 0) - r.left;
  const y = (e.clientY ?? e.touches?.[0]?.clientY ?? 0) - r.top;
  pointer.x = (x / r.width) * 2 - 1;
  pointer.y = -(y / r.height) * 2 + 1;
}

let camTargetPos = camera.position.clone();
let camTargetLook = controls.target.clone();

function onPick(e) {
  setPointer(e);
  raycaster.setFromCamera(pointer, camera);
  const hit = raycaster.intersectObjects(clickable, false)[0];
  if (!hit) return;
  const view = VIEWS[hit.object.name];
  if (!view) return;
  camTargetPos.copy(view.pos);
  camTargetLook.copy(view.tar);
}
renderer.domElement.addEventListener('click', onPick);
renderer.domElement.addEventListener('touchend', onPick, { passive: true });

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏£‡∏á‡∏ô‡∏≤ (‡∏Å‡∏±‡∏ô‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô)
camera.position.set(45, 9, 0);
controls.target.set(0, 9, 0);
controls.update();

// ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏à‡∏≠
addEventListener('resize', () => {
  camera.aspect = innerWidth / innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth, innerHeight);
});




const clock = new THREE.Clock();
controls.update();
function animate() {
  requestAnimationFrame(animate);

  const delta = clock.getDelta();
  if (mixer) mixer.update(delta);

  // ‚úÖ ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ô‡∏∏‡πà‡∏°‡πÜ ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏à‡∏∏‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
  camera.position.lerp(camTargetPos, 0.05);
  controls.target.lerp(camTargetLook, 0.05);
  controls.update();

  // ‡πÄ‡∏î‡∏¥‡∏ô‡πÑ‡∏õ‡∏Å‡∏•‡∏±‡∏ö‡∏Ç‡∏≠‡∏á scarecrow (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°)
  if (scarecrowModel) {
    scarecrowModel.position.x += walkSpeed * walkDirection;
    if (scarecrowModel.position.x > 35 || scarecrowModel.position.x < 25) {
      walkDirection *= -1;
      scarecrowModel.rotation.y += Math.PI;
    }
  }

  renderer.render(scene, camera);
}
animate();


</script>
</body>
</html>